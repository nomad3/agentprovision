---
# SecretStore for prod namespace - connects to GCP Secret Manager
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: gcp-secret-store
  namespace: prod
  labels:
    app.kubernetes.io/name: servicetsunami
    app.kubernetes.io/component: secrets
spec:
  provider:
    gcpsm:
      # GCP Project ID where secrets are stored
      projectID: ai-agency-479516
      auth:
        # Use Workload Identity - no explicit credentials needed
        workloadIdentity:
          clusterLocation: us-central1
          clusterName: gke-autopilot-cluster
          clusterProjectID: ai-agency-479516
          serviceAccountRef:
            name: external-secrets-sa
            namespace: prod
---
# SecretStore for database namespace
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: gcp-secret-store
  namespace: database
  labels:
    app.kubernetes.io/name: servicetsunami
    app.kubernetes.io/component: secrets
spec:
  provider:
    gcpsm:
      projectID: ai-agency-479516
      auth:
        workloadIdentity:
          clusterLocation: us-central1
          clusterName: gke-autopilot-cluster
          clusterProjectID: ai-agency-479516
          serviceAccountRef:
            name: external-secrets-sa
            namespace: database
